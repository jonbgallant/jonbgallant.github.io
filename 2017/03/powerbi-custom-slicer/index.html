<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>How to Create a Power BI Slicer with the Power BI Custom Visual SDK | Jon Gallant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="powerbi,javascript" />
    
    <meta name="description" content="Starting with version 1.5 of the Power BI Custom Visuals SDK, we now have the ability to create “slicer” visuals, which are visuals that can filter data in other visuals on the same report.
For the pu">
<meta property="og:type" content="article">
<meta property="og:title" content="How to Create a Power BI Slicer with the Power BI Custom Visual SDK">
<meta property="og:url" content="http://blog.jongallant.com/2017/03/powerbi-custom-slicer/index.html">
<meta property="og:site_name" content="Jon Gallant">
<meta property="og:description" content="Starting with version 1.5 of the Power BI Custom Visuals SDK, we now have the ability to create “slicer” visuals, which are visuals that can filter data in other visuals on the same report.
For the pu">
<meta property="og:image" content="http://blog.jongallant.com/2017/03/powerbi-custom-slicer/vizpane.png">
<meta property="og:updated_time" content="2017-03-07T19:05:07.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to Create a Power BI Slicer with the Power BI Custom Visual SDK">
<meta name="twitter:description" content="Starting with version 1.5 of the Power BI Custom Visuals SDK, we now have the ability to create “slicer” visuals, which are visuals that can filter data in other visuals on the same report.
For the pu">
<meta name="twitter:image" content="http://blog.jongallant.com/2017/03/powerbi-custom-slicer/vizpane.png">
    

    
        <link rel="alternate" href="http://feeds.feedburner.com/jongallant" title="Jon Gallant" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1148981-8', 'auto');
ga('send', 'pageview');

</script>
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">tech.leadership.music.coffee</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/">Leadership</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Career-Model/">Career Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Productivity/">Productivity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Review-Model/">Review Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Work-Life-Balance/">Work:Life Balance</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Musings/">Musings</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/">Tech</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/3D-Printing/">3D Printing</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Announcements/">Announcements</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Azure/">Azure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Bugs/">Bugs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Career/">Career</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Conferences/">Conferences</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/IoT/">IoT</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Jobs/">Jobs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Microsoft/">Microsoft</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Power-BI/">Power BI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tips/">Tips</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tutorials/">Tutorials</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/archives/">Archive</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/contact/">Contact</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/category/Tech/">Tech</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/category/Tech/Power-BI/">Power BI</a>
    </h1>
</div>

                        
                        <div class="main-body-content">
                        <div class="banner-ad">
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- banner -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-7253926757222509"
     data-ad-slot="8838481977"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
                            <article id="post-powerbi-custom-slicer" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        How to Create a Power BI Slicer with the Power BI Custom Visual SDK
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                
<a href="/2017/03/powerbi-custom-slicer/" class="article-date">
    <time datetime="2017-03-01T12:01:27.000Z" itemprop="datePublished">2017-03-01</time>
</a>

                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powerbi/">powerbi</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>Starting with version 1.5 of the <a href="https://github.com/Microsoft/PowerBI-visuals-tools" target="_blank" rel="external">Power BI Custom Visuals SDK</a>, we now have the ability to create “slicer” visuals, which are visuals that can filter data in other visuals on the same report.</p>
<p>For the purposes of this blog post, we are going to create a very simple radio button control to demonstrate the components needed to create a slicer. I also created a much more sophisticated “Range Slider” control that you can find here: <a href="https://github.com/jonbgallant/PowerBI-visuals-rangeSlider" target="_blank" rel="external">PowerBI-visuals-rangeSlider</a></p>
<p>See my <a href="http://bit.ly/pbicustomviz" target="_blank" rel="external">How to Get Started with Power BI Custom Visuals</a> for general custom visual development tutorials.</p>
<blockquote>
<p>You can download the source for this visual here: <a href="https://github.com/jonbgallant/PowerBI-visuals-radioSlicer" target="_blank" rel="external">PowerBI-visuals-radioSlicer</a></p>
<p>You can download the visual to use in reports here: <a href="https://github.com/jonbgallant/PowerBI-visuals-radioSlicer/raw/master/radioSlicer/dist/radioSlicer.pbiviz" target="_blank" rel="external">Download Radio Slicer</a></p>
</blockquote>
<p>Here’s what this custom visual will look like when you are done with this tutorial.</p>
<p><img src="reportview.png" alt=""></p>
<p>Here’s what the icon looks like in the visualization pane:<br><img src="vizpane.png" alt=""></p>
<h2 id="Step-0-Create-Data-Set"><a href="#Step-0-Create-Data-Set" class="headerlink" title="Step 0: Create Data Set"></a>Step 0: Create Data Set</h2><p>Create a dataset that has the following structure:  </p>
<table>
<thead>
<tr>
<th>Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
</tr>
<tr>
<td>2</td>
</tr>
<tr>
<td>3</td>
</tr>
<tr>
<td>4</td>
</tr>
</tbody>
</table>
<p>You can use Power BI Desktop, Excel, Streaming Datasets, SQL or whatever you prefer.  I’ve provided an <a href="https://github.com/jonbgallant/PowerBI-visuals-radioSlicer/raw/master/assets/data.xlsx" target="_blank" rel="external">excel spreadsheet here</a> that you can use.  Just import it into Power BI using the web interface, or use Power BI Desktop and Publish it to the web.</p>
<h2 id="Step-1-Create-Visual-pbiviz-new"><a href="#Step-1-Create-Visual-pbiviz-new" class="headerlink" title="Step 1: Create Visual: pbiviz new"></a>Step 1: Create Visual: pbiviz new</h2><p>If you have no idea what pbiviz new means, then see my <a href="http://bit.ly/pbicustomviz" target="_blank" rel="external">How to Get Started with Power BI Custom Visuals</a> for general custom visual development tutorials.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">pbiviz new radioSlicer</div></pre></td></tr></table></figure>
<p>Open this folder in <a href="https://code.visualstudio.com" target="_blank" rel="external">VS Code</a> or your preferred IDE.</p>
<h2 id="Step-2-Update-Settings-capabilities-json"><a href="#Step-2-Update-Settings-capabilities-json" class="headerlink" title="Step 2: Update Settings: capabilities.json"></a>Step 2: Update Settings: capabilities.json</h2><p>Open capabilities.json and add replace its contents with the following json.  </p>
<p>This file:</p>
<ul>
<li>Adds a single Grouping data property, which will get us the categories needed for filtering </li>
<li>Adds the “General-&gt;filter” format property which allows this visual to participate in filtering capabilities.</li>
<li>Adds a “top” number so we get the max categories allowed by Power BI. Right now that number is 30k categories max, but I set to 100000 for fun.</li>
</ul>
<script src="https://gist.github.com/jonbgallant/7a288cb2fdc8a43c1407852ed2043044.js"></script>

<h2 id="Step-3-Create-Code-visual-ts"><a href="#Step-3-Create-Code-visual-ts" class="headerlink" title="Step 3: Create Code: visual.ts"></a>Step 3: Create Code: visual.ts</h2><p>The meat of the visual lives in visual.ts.  Rather than explain each piece individually, I’m including the full code file below with bullets that describe what is going on.</p>
<p>1. Instantiate an ISelectionManager object in constructor<br>2. Extract categories from Power BI data model<br>3. Loop through categories and create a “selectionId” for each of them. SelectionIds are objects that you pass to the SelectionManager’s select method. It contains the metadata needed to filter.<br>4. Loop through each value and inject a new radio button into the DOM for each value.<br>5. Add an onclick event handler to each radio button that grabs the matching selectionId, selects it and then calls applySelectionFilter().</p>
<blockquote>
<p>Note: You can only filter on categories, not values, and you are limited to 30k categories.</p>
</blockquote>
<script src="https://gist.github.com/jonbgallant/9d250e330c176669317794117b34e7a5.js"></script>

<h2 id="Step-4-Package-pbiviz-package"><a href="#Step-4-Package-pbiviz-package" class="headerlink" title="Step 4: Package: pbiviz package"></a>Step 4: Package: pbiviz package</h2><p>Run the following command to package the visual and share it as a pbiviz file.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">pbiviz package</div></pre></td></tr></table></figure>
<p>Hopefully this post helps you get started building slicer visuals.</p>
<p>Jon</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://blog.jongallant.com/2017/03/powerbi-custom-slicer/" data-id="cj4io7iqb00tfpcj4cca30rhz" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

                        </div>
                        <div style="width:64%;margin:auto;" data-type="ad" data-publisher="lqm.jongallant.site" data-format="728x90" data-zone="ros" data-tags="iot%2cangularjs%2cjavascript%2cnode%2cazureiot%2cazure%2cpowerbi%2cseattle%2cdeveloper%2cmicrosoft%2ctutorials"></div>
                    </section>
                    
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2017 Jon Gallant</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a>. Hosting provided by <a href="http://birch.com" target="_blank">Birch</a>. <p>Disclaimer: The opinions expressed herein are my own personal opinions and do not represent my employer’s view in any way.</p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'jongallant';
    
    
    var disqus_url = 'http://blog.jongallant.com/2017/03/powerbi-custom-slicer/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>

    <script type='text/javascript'>
function _dmBootstrap(file) {
    var _dma = document.createElement('script');
    _dma.type = 'text/javascript';
    _dma.async = true;
    _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
}
function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js'); }
(function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000); })();
</script>
    
</body>
</html>
