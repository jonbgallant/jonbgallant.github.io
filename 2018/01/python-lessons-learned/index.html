<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>
        
        Python Lessons Learned. Read This Before You Start Building a Distributable Python Package |
        
        Jon Gallant
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="python" />
    
    <meta name="description" content="I just published my first official distributable Python package to PyPI, which makes it available to install via pip install.  It’s called Azure IoT Edge Dev Tool (PyPI, GitHub, Video) and helps IoT E">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Lessons Learned. Read This Before You Start Building a Distributable Python Package">
<meta property="og:url" content="https://blog.jongallant.com/2018/01/python-lessons-learned/index.html">
<meta property="og:site_name" content="Jon Gallant">
<meta property="og:description" content="I just published my first official distributable Python package to PyPI, which makes it available to install via pip install.  It’s called Azure IoT Edge Dev Tool (PyPI, GitHub, Video) and helps IoT E">
<meta property="og:image" content="https://blog.jongallant.com/2018/01/python-lessons-learned/python.png">
<meta property="og:updated_time" content="2018-12-10T07:40:15.302Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python Lessons Learned. Read This Before You Start Building a Distributable Python Package">
<meta name="twitter:description" content="I just published my first official distributable Python package to PyPI, which makes it available to install via pip install.  It’s called Azure IoT Edge Dev Tool (PyPI, GitHub, Video) and helps IoT E">
<meta name="twitter:image" content="https://blog.jongallant.com/2018/01/python-lessons-learned/python.png">
<meta name="twitter:creator" content="@jongallant">
    

    
    <link rel="alternate" href="http://feeds.feedburner.com/jongallant" title="Jon Gallant" type="application/atom+xml" />
    

    
    <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-1148981-8', 'auto');
    ga('send', 'pageview');

</script>
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/">Leadership</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Career-Model/">Career Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Proactive-Mentorship/">Proactive Mentorship</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Productivity/">Productivity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Review-Model/">Review Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Work-Life-Balance/">Work:Life Balance</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Musings/">Musings</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/">Tech</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/3D-Printing/">3D Printing</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Announcements/">Announcements</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Azure/">Azure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Bugs/">Bugs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Career/">Career</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Conferences/">Conferences</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/IoT/">IoT</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Jobs/">Jobs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Microsoft/">Microsoft</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Power-BI/">Power BI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tips/">Tips</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tutorial/">Tutorial</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tutorials/">Tutorials</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/archives/">Archive</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/videos/">Videos</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/contact/">Contact</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/category/Tech/">Tech</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/category/Tech/Tips/">Tips</a>
    </h1>
</div>

                        
                        <div class="main-body-content">
                            <div class="banner-ad">
                                <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                                <!-- banner -->
                                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7253926757222509"
                                    data-ad-slot="8838481977" data-ad-format="auto" data-full-width-responsive="true"></ins>
                                <script>
                                    (adsbygoogle = window.adsbygoogle || []).push({});
                                </script>
                            </div>
                            <article id="post-python-lessons-learned" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Python Lessons Learned. Read This Before You Start Building a Distributable Python Package
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                
<a href="/2018/01/python-lessons-learned/" class="article-date">
    <time datetime="2018-01-04T06:14:25.000Z" itemprop="datePublished">2018-01-04</time>
</a>

                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>I just published my first official distributable <a href="https://pypi.python.org/pypi/iotedgedev" target="_blank" rel="external">Python package to PyPI</a>, which makes it available to install via <code>pip install</code>.  It’s called <strong>Azure IoT Edge Dev Tool</strong> (<a href="https://pypi.python.org/pypi/iotedgedev" target="_blank" rel="external">PyPI</a>, <a href="https://github.com/azure/iotedgedev" target="_blank" rel="external">GitHub</a>, <a href="https://www.youtube.com/watch?v=lcDFX8PXqUQ" target="_blank" rel="external">Video</a>) and helps IoT Edge developers with inner loop dev tasks (dev, test, debug, build, push, release). This post is less about the actual pip package and more about my experience building and distributing one.</p>
<p>Coding in Python is easy. Distributing it as a Python package is hard.  5% of the effort is coding. 95% of the effort goes into figuring out how to distribute the thing.  I spent so many hours struggling through this on my own that I had to share to hopefully save you some ticks.</p>
<p>Let’s jump right in.</p>
<h2 id="python-version-2-or-3"><a class="header-anchor" href="#python-version-2-or-3"></a>Python Version 2 or 3</h2>
<p>My project works with both Python 2.7 and Python 3.6, but I <strong>should have only coded it for Python 3</strong>.  If you don’t absolutely need to support Python 2.7, then don’t.  I spent way too much time debugging issues that worked on one version but not the other.  I’m building a proof-of-concept package, so I could easily ask my users to install Python 3. In more official organization supported packages, you might not have that luxury.</p>
<h2 id="isolate-installs-with-virtual-environments"><a class="header-anchor" href="#isolate-installs-with-virtual-environments"></a>Isolate Installs with Virtual Environments</h2>
<p>I just jumped right in to writing Python code and didn’t realize the concept of Virtual Environments existed in Python.  In a nutshell, it allows you to isolate pip installs from other pip installs, so you avoid versioning conflicts with global packages.  You can read more about them here: <a href="https://docs.python.org/3/tutorial/venv.html" target="_blank" rel="external">https://docs.python.org/3/tutorial/venv.html</a></p>
<h2 id="python-package-scaffold-cookiecutter"><a class="header-anchor" href="#python-package-scaffold-cookiecutter"></a>Python Package Scaffold: Cookiecutter</h2>
<p>I discovered <a href="https://github.com/audreyr/cookiecutter" target="_blank" rel="external">Cookiecutter</a>, the Python package project scaffolding tool, about half way through the creation of my pip package.  I wish I would have known about it earlier, because it is really helpful. It will scaffold out an entire project for you with unit tests, Travis integration, setuptools and so on.  I used the <a href="https://github.com/audreyr/cookiecutter-pypackage" target="_blank" rel="external">Cookiecutter PyPackage</a> template, but you can find a lot more of them here: <a href="https://cookiecutter.readthedocs.io/en/latest/readme.html#a-pantry-full-of-cookiecutters" target="_blank" rel="external">A Pantry Full of Cookiecutters<br>
</a></p>
<h3 id="create-project"><a class="header-anchor" href="#create-project"></a>Create Project</h3>
pip install -U cookiecutter
cookiecutter https://github.com/audreyr/cookiecutter-pypackage.git
<p><img src="03.png" alt=""></p>
<h3 id="project-name"><a class="header-anchor" href="#project-name"></a>Project Name</h3>
<p>I wanted to use <code>iotedgedev</code> as my PyPI name <strong>and</strong> GitHub repo and I also wanted <code>iotedgedev</code> to be the command line name. The cookiecutter template didn’t allow that directly so I had to make a few manual edits.  I created a project named <code>iotedgedev</code> and then made these changes:</p>
<ol>
<li>In <code>setup.py</code> changed <code>setup(name=&quot;iotedgedev&quot;)</code></li>
<li>In <code>.travis.yml</code> and <code>travis_pypi_setup.py</code> changed <code>iotedgedev</code> to <code>iotedgedev</code></li>
</ol>
<h3 id="reserve-your-project-name-on-both-pypi-test-and-pypi-production-environments"><a class="header-anchor" href="#reserve-your-project-name-on-both-pypi-test-and-pypi-production-environments"></a>Reserve Your Project Name on both PyPI Test and PyPI Production Environments</h3>
<p>PyPI Test(<a href="https://test.pypi.org" target="_blank" rel="external">https://test.pypi.org</a>) and PyPI Production(<a href="https://pypi.org" target="_blank" rel="external">https://pypi.org</a>) have different backends, so you need to register your project name with both of them.  Do this immediately after you decide on a name, because someone could register it or you could run into an issue like I did, where I was getting a ]403 because someone already registered the name against the PyPI Test environment](<a href="https://github.com/pypa/warehouse/issues/4607" target="_blank" rel="external">https://github.com/pypa/warehouse/issues/4607</a>).  PyPI was able to resolve the issue - but you might not be able to.  Reserve your names.</p>
<h2 id="testing-tox-and-unittest"><a class="header-anchor" href="#testing-tox-and-unittest"></a>Testing: Tox and unittest</h2>
<p>The template I chose uses <a href="https://pypi.python.org/pypi/tox" target="_blank" rel="external">Tox</a> and <a href="https://docs.python.org/2/library/unittest.html" target="_blank" rel="external">unittest</a> (not pytest) so I just went with that.  The tests are in the tests folder and were pretty straight forward to write.  Granted, I only did a few simple tests and might switch to pytest at a later time if need be, but for my case unittest worked fine.</p>
<p>Tox is configured in the <code>tox.ini</code> file.  You can set it up to run your code against any Python version and linters such as flake.</p>
<p>When you want to run your tests, you simply navigate to your root and execute <code>tox</code>.</p>
<h2 id="install-package-locally-with-editable-installs"><a class="header-anchor" href="#install-package-locally-with-editable-installs"></a>Install Package Locally with Editable Installs</h2>
<p>When I first started, I was using full commands such as <code>python edge.py runtime --setup --start</code>, but then I discovered <a href="https://pip.pypa.io/en/stable/reference/pip_install/#editable-installs" target="_blank" rel="external">“Editable Installs”</a>, which will install a package from a local or github source without having to have it on PyPI</p>
<p>So, I ran <code>pip install -e .</code> from the root of my project and <code>iotedgedev</code> is now available.</p>
<p>This is super helpful because I can just edit my code and when I go back to the command prompt, iotedgedev commands are all up-to-date without any other installs required.</p>
<h2 id="package-distribution-pypi"><a class="header-anchor" href="#package-distribution-pypi"></a>Package Distribution: PyPI</h2>
<p>After you have coded your project, you are going to want to upload it to <a href="https://testpypi.python.org/pypi" target="_blank" rel="external">PyPI test environment</a> to test it out first and then, when ready, upload it to the <a href="https://pypi.python.org/pypi" target="_blank" rel="external">PyPI production environment</a>.</p>
<h3 id="setuptools-not-distutils"><a class="header-anchor" href="#setuptools-not-distutils"></a>Setuptools, not distutils</h3>
<p>The Cookiecutter project I used included setuptools configuration. After a quick search, I discovered that’s the preferred route, so I just went with it.</p>
<h3 id="wheel-not-egg"><a class="header-anchor" href="#wheel-not-egg"></a>Wheel, not egg</h3>
<p>Wheel and Egg are packaging formats, you can read more about them <a href="https://packaging.python.org/discussions/wheel-vs-egg/" target="_blank" rel="external">here</a>.  I went with Wheel because it appears to be the recommended approach and it worked the first time I tried it.</p>
<p>To generate a new wheel: <code>python setup.py bdist_wheel</code></p>
<h3 id="bumpversion"><a class="header-anchor" href="#bumpversion"></a>Bumpversion</h3>
<p>This package will find all the appropriate versions and bump them up by one when you call it.</p>
<p>To bump the version: <code>bumpversion minor</code></p>
<h3 id="upload-process"><a class="header-anchor" href="#upload-process"></a>Upload Process</h3>
<ol>
<li>
<p>Push Changes</p>
 git add .
git commit -m <span class="string">""</span>
git push
</li>
<li>
<p>Bumpversion and create Wheel</p>
 bumpversion minor &amp;&amp; python setup.py bdist_wheel
</li>
<li>
<p>Push Tags</p>
 git push --tags
</li>
<li>
<p>Upload with Twine</p>
 <span class="comment">#test</span>
twine upload -r pypitest dist/azure_iot_edge_dev_tool-0.50.0-py2.py3-none-any.whl

<span class="comment">#production</span>
twine upload -r pypi dist/azure_iot_edge_dev_tool-0.52.0-py2.py3-none-any.whl
<blockquote>
<p>This will read from .pypirc file in the root of your project.</p>
</blockquote>
</li>
</ol>
<h3 id="store-pypi-settings-in-pypirc"><a class="header-anchor" href="#store-pypi-settings-in-pypirc"></a>Store PyPI Settings in .pypirc</h3>
<p>Store your PyPI settings in a .pypirc file in the root of your project, which looks something like this:</p>
[distutils]
index-servers =
  pypi
  pypitest

[pypi]
repository=https://pypi.python.org/pypi
username=yourusername
password=

[pypitest]
repository=https://test.pypi.org/legacy/
username=yourusername
password=
<p>That way when you call <code>twine upload -r pypi ...</code> it will use the repository, username and password in the file instead of typing it every time you push to PyPI.</p>
<h3 id="test-pip-install"><a class="header-anchor" href="#test-pip-install"></a>Test Pip Install</h3>
<p>When you run pip install it will point to production by default, you need to pass <code>--no-cache-dir</code>, <code>--index-url</code> and an <code>--extra-index-url</code> for it to ignore local packages, point to the test env, and use the production env for project dependencies.</p>
pip --no-cache-dir install --index-url https://test.pypi.org/simple/ iotedgedev --extra-index-url https://pypi.org/simple
<h2 id="command-line-arguments-click"><a class="header-anchor" href="#command-line-arguments-click"></a>Command Line Arguments: Click</h2>
<p>I started off with <a href="https://docs.python.org/3/library/argparse.html" target="_blank" rel="external">argparse</a> and evaluated a few others, but landed on <a href="http://click.pocoo.org" target="_blank" rel="external">Click</a> because I like how it is integrated into the code. I had everything working with argparse and it was fine, but one I started writing tests I really appreciated that Click came with a <code>CLiRunner</code> object that was really helpful. I converted everything to Click in an hour or so.  You can see the final result here: <a href="https://github.com/azure/iotedgedev/blob/master/iotedgedev/cli.py" target="_blank" rel="external">iotedgedev/iotedgedev/cli.py</a>. You can view the full command structure on GitHub here: <a href="https://github.com/azure/iotedgedev#commands" target="_blank" rel="external">iotedgedev/README.md</a></p>
<h3 id="help-with-h-and-help"><a class="header-anchor" href="#help-with-h-and-help"></a>Help with -h and --help</h3>
<p>You can get both -h and --help for help commands if you pass this <code>CONTEXT_SETTINGS = dict(help_option_names=[&quot;-h&quot;, &quot;--help&quot;])</code> into the <code>@click.group</code> statement.</p>
CONTEXT_SETTINGS = dict(help_option_names=[&apos;-h&apos;, &apos;--help&apos;])


@click.group(context_settings=CONTEXT_SETTINGS, invoke_without_command=True)
<h3 id="version-command"><a class="header-anchor" href="#version-command"></a>Version Command</h3>
<p>You can easily get a --version command by adding <code>@click.version_option()</code> above your main method:</p>
@click.version_option()
def main():
<h3 id="help-print"><a class="header-anchor" href="#help-print"></a>Help Print</h3>
<p>You can print out the help message using the following code. In my main Package, I want to print help if not commands are passed in and I want there to be an option hanging off the root.  This is the only way I could figure out how to do that.</p>
def main(set_config):
    if(set_config):
        utility.set_config()
    else:
        ctx = click.get_current_context()
        if ctx.invoked_subcommand == None:
            click.echo(ctx.get_help())
<h3 id="echo-instead-of-print-statements"><a class="header-anchor" href="#echo-instead-of-print-statements"></a>Echo instead of Print Statements</h3>
<p>Click comes with an echo method that allows you to colorize your print statements and is Python 2/3 safe.  One of the last things I did in the project was convert all of my statements to use click.secho. Coloring my output helps differentiate it from the output of the out of proc calls I make.</p>
<p>Here, I’m using a mixture of Yellow and White, which looks White and Grey with my current ConEmu color scheme.</p>
<p><img src="05.png" alt=""></p>
<h2 id="out-of-process-calls-subprocess-popen"><a class="header-anchor" href="#out-of-process-calls-subprocess-popen"></a>Out of Process Calls: subprocess.Popen</h2>
<p>My script makes a bunch of out of process calls to things like <code>dotnet</code>, <code>docker</code> and <code>iotedgectl</code>.  I toyed around with a bunch of ways to do this and finally landed on subprocess.Popen because I could get both the status code and the result (print statements) from the call.  I wrapped mine in a method like this:</p>
def exe_proc(self, params, shell=False):
       proc = subprocess.Popen(
           params, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=shell)

       stdout_data, stderr_data = proc.communicate()
       if stdout_data != &quot;&quot;:
           self.output.procout(self.decode(stdout_data))

       if proc.returncode != 0:
           self.output.error(self.decode(stderr_data))
           sys.exit()
<p><a href="https://github.com/Azure/iotedgedev/blob/master/iotedgedev/utility.py#L24" target="_blank" rel="external">https://github.com/Azure/iotedgedev/blob/master/iotedgedev/utility.py#L24</a></p>
<h2 id="pypi-readme"><a class="header-anchor" href="#pypi-readme"></a>PyPI Readme</h2>
<p>PyPI does not natively support Markdown, although the website says it does, after many hours of trying I could not get it to work.  They do support RST and there are ways to convert Markdown to RST - but nothing was working for me. The Markdown to RST converter I was using <code>pyandoc</code> was not generating valid RST and I was not interested in maintaining two versions (Markdown &amp; RST) of my Readme. If this project was officially supported by Microsoft, then I would have figured it out, but this is a proof-of-concept project, so I decided to abandon the PyPI readme in favor of GitHub markdown and then linked to GitHub from PyPI.</p>
<p>See link to github in this image:</p>
<p><img src="04.png" alt=""></p>
<h2 id="environment-variables-python-dotenv"><a class="header-anchor" href="#environment-variables-python-dotenv"></a>Environment Variables: Python-DotEnv</h2>
<p>My package heavily relies on Environment Variables so I can have a very simple command interface.  I did not want to ask the user to type all them in at the command line.  I used dotenv in my node projects and was happy to see that there’s one available for Python as well: <a href="https://github.com/theskumar/python-dotenv" target="_blank" rel="external">Python-DotEnv</a>. You can view my .env file here:<a href="https://github.com/Azure/iotedgedev/blob/master/iotedgedev/template/.env.tmp" target="_blank" rel="external">iotedgedev/template/.env.tmp</a> and you can see how I’m loading it here: <a href="https://github.com/Azure/iotedgedev/blob/master/iotedgedev/envvars.py#L59" target="_blank" rel="external">iotedgedev/envvars.py</a></p>
<p>This will load the .env from the current directory:</p>
from dotenv import load_dotenv

dotenv_path = os.path.join(os.getcwd(), &apos;.env&apos;)
load_dotenv(dotenv_path)
<p>And make all the Variables available via <code>os.environ[&quot;NAME&quot;]</code></p>
<blockquote>
<p>Make sure you add <code>.env</code> to your .gitignore file.</p>
</blockquote>
<h2 id="resources"><a class="header-anchor" href="#resources"></a>Resources</h2>
<p>I found this video really helpful: <a href="https://www.youtube.com/watch?v=4fzAMdLKC5k" target="_blank" rel="external">Python Packaging from Init to Deploy</a></p>
<h2 id="conclusion"><a class="header-anchor" href="#conclusion"></a>Conclusion</h2>
<p>I still have a lot to learn about Python and package distribution, but I feel like I’m in decent shape after getting this far. I went back and forth from hating Python to sometimes liking it. It took a lot less time to write the Python code then it did to distribute it.</p>
<p>I really hope this posts saves you a time.</p>
<p>Jon</p>

        </div>
        <footer>
        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>


                            
                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar">
        <i class="toggle icon"></i>
    </a>
    <div class="sidebar-top">

        <ul class="social-links">
            
            
            <li>
                <a class="social-tooltip" title="twitter" href="http://twitter.com/jongallant"
                    target="_blank">
                    <i class="icon fa fa-twitter"></i>
                </a>
            </li>
            
            
            
            <li>
                <a class="social-tooltip" title="github" href="https://github.com/jongio"
                    target="_blank">
                    <i class="icon fa fa-github"></i>
                </a>
            </li>
            
            
            
            <li>
                <a class="social-tooltip" title="rss" href="http://feeds.feedburner.com/jongallant"
                    target="_blank">
                    <i class="icon fa fa-rss"></i>
                </a>
            </li>
            
            
            
            <li>
                <a class="social-tooltip" title="linkedin" href="http://www.linkedin.com/in/jongallant"
                    target="_blank">
                    <i class="icon fa fa-linkedin"></i>
                </a>
            </li>
            
            
            
            <li>
                <a class="social-tooltip" title="youtube" href="https://www.youtube.com/jongallant"
                    target="_blank">
                    <i class="icon fa fa-youtube"></i>
                </a>
            </li>
            
            
        </ul>
    </div>
    
    
    <nav id="article-nav">
        
            <a href="/2018/01/azure-function-config/" id="article-nav-newer" class="article-nav-link-wrap">
                <strong class="article-nav-caption">
                    newer
                </strong>
                <p class="article-nav-title">
                    
                        Azure Functions v2 Now Uses ASP.NET Core Configuration and No Longer Supports ConfigurationManager
                            
                </p>
                <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>

            </a>
            
                
                    <a href="/2017/12/dotnet-value-cannot-be-null-parameter-name-path1/" id="article-nav-older" class="article-nav-link-wrap">
                        <strong class="article-nav-caption">
                            older
                        </strong>
                        <p class="article-nav-title">
                            Solution to &#39;Value cannot be null. Parameter name: path1&#39; with dotnet and tox
                        </p>
                        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>

                    </a>
                    
    </nav>
    
    

    <div class="widgets-container">
        
        
        <br/>
<div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/videoseries?list=PLiMIJTv6gK5_Zmdcmbo-kxAbpeGjSou9x&amp;showinfo=0?ecver=2" width="640" height="360" frameborder="0" gesture="media" allow="encrypted-media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div>
<br/>
        
        <div class="github-card" data-github="jongio" data-width="340" data-height="150" data-theme="default"></div>
<script src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
        
        <a class="twitter-timeline" data-height="700" href="https://twitter.com/jongallant?ref_src=twsrc%5Etfw"></a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        
        

        <div class="rail-ad">
            <!-- rail -->
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7253926757222509" data-ad-slot="7222147978"
                data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>

            <!-- rail -->
            <!-- 2nd rail -->
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7253926757222509" data-ad-slot="1523952970"
                data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>
</aside>
                </div>
            </div>
        </div>
        <div class="banner-ad">
    <!-- banner -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7253926757222509" data-ad-slot="8838481977"
        data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo-n"></a>
                </h1>
                <p>&copy;
                    2019
                    Jon Gallant
                </p>
                <p>Disclaimer: The opinions expressed herein are my own personal opinions and do not represent my
                    employer’s view in any way.</p>
            </div>

        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'jongallant';
    
    
    var disqus_url = 'https://blog.jongallant.com/2018/01/python-lessons-learned/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>

</html>