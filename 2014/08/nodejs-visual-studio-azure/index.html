<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Node.js on Azure via Visual Studio and Git | Jon Gallant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="azure,nodejs,dev" />
    
    <meta name="description" content="I was just messing around with Node.js Tools for Visual Studio and Azure and ran into a few gotchas while getting everything setup. Hopefully this helps you get going.
1. Install the Node.js Tools for">
<meta property="og:type" content="article">
<meta property="og:title" content="Node.js on Azure via Visual Studio and Git">
<meta property="og:url" content="http://blog.jongallant.com/2014/08/nodejs-visual-studio-azure/index.html">
<meta property="og:site_name" content="Jon Gallant">
<meta property="og:description" content="I was just messing around with Node.js Tools for Visual Studio and Azure and ran into a few gotchas while getting everything setup. Hopefully this helps you get going.
1. Install the Node.js Tools for">
<meta property="og:image" content="http://blog.jongallant.com/images/blog/Node.js-Express_D498/image.png">
<meta property="og:updated_time" content="2016-12-29T04:05:59.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Node.js on Azure via Visual Studio and Git">
<meta name="twitter:description" content="I was just messing around with Node.js Tools for Visual Studio and Azure and ran into a few gotchas while getting everything setup. Hopefully this helps you get going.
1. Install the Node.js Tools for">
<meta name="twitter:image" content="http://blog.jongallant.com/images/blog/Node.js-Express_D498/image.png">
    

    
        <link rel="alternate" href="http://feeds.feedburner.com/jongallant" title="Jon Gallant" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1148981-8', 'auto');
ga('send', 'pageview');

</script>
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">tech.leadership.music.coffee</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/">Leadership</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Career-Model/">Career Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Productivity/">Productivity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Review-Model/">Review Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Work-Life-Balance/">Work:Life Balance</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Musings/">Musings</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/">Tech</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/3D-Printing/">3D Printing</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Announcements/">Announcements</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Azure/">Azure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Bugs/">Bugs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Career/">Career</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Conferences/">Conferences</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/IoT/">IoT</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Jobs/">Jobs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Microsoft/">Microsoft</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Power-BI/">Power BI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tips/">Tips</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tutorials/">Tutorials</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/archives/">Archive</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/contact/">Contact</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/category/Tech/">Tech</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/category/Tech/Tutorials/">Tutorials</a>
    </h1>
</div>

                        
                        <div class="main-body-content">
                        <div class="banner-ad">
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- banner -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-7253926757222509"
     data-ad-slot="8838481977"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
                            <article id="post-nodejs-visual-studio-azure" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Node.js on Azure via Visual Studio and Git
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                
<a href="/2014/08/nodejs-visual-studio-azure/" class="article-date">
    <time datetime="2014-08-13T15:47:00.000Z" itemprop="datePublished">2014-08-13</time>
</a>

                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/azure/">azure</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dev/">dev</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>I was just messing around with Node.js Tools for Visual Studio and Azure and ran into a few gotchas while getting everything setup. Hopefully this helps you get going.</p>
<p>1. Install the <a href="http://nodejstools.codeplex.com" target="_blank" rel="external">Node.js Tools for Visual Studio</a></p>
<p>2. Create a new “Basic Express Application”</p>
<ul>
<li>Uncheck “Create directory for solution” – This will put the sln file in the same dir as the project file. If you don’t uncheck this then the “git sync” will push the website into a subfolder in Azure. Unchecking will put the site in the root, which where you want it.</li>
<li>Check add to source control. This is so you are prompted to add a local git repo.</li>
</ul>
<p><img src="/images/blog/Node.js-Express_D498/image.png" alt=""></p>
<p>3. Click “Yes” to run npm install.</p>
<p><img src="/images/blog/Node.js-Express_D498/image_3.png" alt=""></p>
<p>4. Choose “Git”</p>
<p><img src="/images/blog/Node.js-Express_D498/image_4.png" alt=""></p>
<p>5. Hit F5 to ensure that the project runs. You should see this:</p>
<p><img src="/images/blog/Node.js-Express_D498/image_5.png" alt=""></p>
<p>6. Back to VS, Team Explorer, Changes. Enter a commit message and click Commit</p>
<p><img src="/images/blog/Node.js-Express_D498/image_6.png" alt=""></p>
<p>7. Go to the Azure web portal, Create a new site</p>
<p><img src="/images/blog/Node.js-Express_D498/image_7.png" alt=""></p>
<p>8. Go to the Dashboard of that site and click “Set up deployment from source control” in the right rail and choose Local Git Repository</p>
<p><img src="/images/blog/Node.js-Express_D498/image_8.png" alt=""></p>
<p><img src="/images/blog/Node.js-Express_D498/image_9.png" alt=""></p>
<p>9. Copy your Git url</p>
<p><img src="/images/blog/Node.js-Express_D498/image_10.png" alt=""></p>
<p>10. Back in VS, Go to Team Explorer, Unsynced Commits and enter the URL of your Azure website git repo and hit publish. It will prompt you for creds. Enter your FTP user creds for that site, not your Azure account creds.</p>
<p><img src="/images/blog/Node.js-Express_D498/image_11.png" alt=""></p>
<p>You will see it deploying on the Azure portal</p>
<p><img src="/images/blog/Node.js-Express_D498/image_12.png" alt=""></p>
<p><img src="/images/blog/Node.js-Express_D498/image_13.png" alt=""></p>
<p>11. Hit your site URL. You might get this error. </p>
<p><img src="/images/blog/Node.js-Express_D498/image_14.png" alt=""></p>
<p>I went into the FTP of the site and found the log file “Logging-errors.txt</p>
<p><img src="/images/blog/Node.js-Express_D498/image_15.png" alt=""></p>
<p>Which had this error:<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Wed Aug 13 2014 22:35:53 GMT+0000 (Coordinated Universal Time): Unaught exception: Error: Cannot find module &apos;debug&apos;</div><div class="line">     at Function.Module._resolveFilename (module.js:338:15)</div><div class="line">     at Function.Module._load (module.js:280:25)</div><div class="line">     at Module.require (module.js:364:17)</div><div class="line">     at require (module.js:380:17)</div><div class="line">     at Object.&lt;anonymous&gt; (D:\home\site\wwwroot\node_modules\stylus\lib\visitor\evaluator.js:21:13)</div><div class="line">     at Module._compile (module.js:456:26)</div><div class="line">     at Object.Module._extensions..js (module.js:474:10)</div><div class="line">     at Module.load (module.js:356:32)</div><div class="line">     at Function.Module._load (module.js:312:12)</div><div class="line">     at Module.require (module.js:364:17)</div></pre></td></tr></table></figure></p>
<p>which means that npm didn’t install the “debug” module which is a dependency of “stylus”. I think the problem is related to this: <a href="http://stackoverflow.com/questions/18401606/npm-doesnt-install-module-dependencies" title="http://stackoverflow.com/questions/18401606/npm-doesnt-install-module-dependencies" target="_blank" rel="external">http://stackoverflow.com/questions/18401606/npm-doesnt-install-module-dependencies</a>. So, I added “debug” to my package.json file.<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&quot;dependencies&quot;: &#123;</div><div class="line">     &quot;express&quot;: &quot;3.4.4&quot;,</div><div class="line">     &quot;jade&quot;: &quot;&quot;,</div><div class="line">     &quot;stylus&quot;: &quot;&quot;,</div><div class="line">     &quot;debug&quot;:  &quot;*&quot;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>Committed those changes and sync’d.</p>
<p><img src="/images/blog/Node.js-Express_D498/image_16.png" alt=""></p>
<p>And now the site works</p>
<p><img src="/images/blog/Node.js-Express_D498/image_17.png" alt=""></p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://blog.jongallant.com/2014/08/nodejs-visual-studio-azure/" data-id="cj4ro5vzp00q89sj4kn99atsm" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

                        </div>
                        <div style="width:64%;margin:auto;" data-type="ad" data-publisher="lqm.jongallant.site" data-format="728x90" data-zone="ros" data-tags="iot%2cangularjs%2cjavascript%2cnode%2cazureiot%2cazure%2cpowerbi%2cseattle%2cdeveloper%2cmicrosoft%2ctutorials"></div>
                    </section>
                    
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2017 Jon Gallant</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a>. Hosting provided by <a href="http://birch.com" target="_blank">Birch</a>. <p>Disclaimer: The opinions expressed herein are my own personal opinions and do not represent my employer’s view in any way.</p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'jongallant';
    
    
    var disqus_url = 'http://blog.jongallant.com/2014/08/nodejs-visual-studio-azure/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>

    <script type='text/javascript'>
function _dmBootstrap(file) {
    var _dma = document.createElement('script');
    _dma.type = 'text/javascript';
    _dma.async = true;
    _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
}
function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js'); }
(function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000); })();
</script>
    
</body>
</html>
