<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>How to connect a PN532 NFC Shield to a RaspberryPi via libnfc | Jon Gallant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="iot" />
    
    <meta name="description" content="I’m working on an NFC project and to test things out I got a PN532 NFC shield working with a RaspberryPi via libnfc. 
Adafruit has a good step-by-step tutorial, but it’s not up-to-date and it’s for th">
<meta property="og:type" content="article">
<meta property="og:title" content="How to connect a PN532 NFC Shield to a RaspberryPi via libnfc">
<meta property="og:url" content="http://blog.jongallant.com/2014/11/raspberrypi-libnfc-pn532-nfc-shield/index.html">
<meta property="og:site_name" content="Jon Gallant">
<meta property="og:description" content="I’m working on an NFC project and to test things out I got a PN532 NFC shield working with a RaspberryPi via libnfc. 
Adafruit has a good step-by-step tutorial, but it’s not up-to-date and it’s for th">
<meta property="og:image" content="http://blog.jongallant.com/images/blog/nfc-shield-pn532-raspberrypi-libnfc_D006/image.png">
<meta property="og:updated_time" content="2016-12-29T03:37:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to connect a PN532 NFC Shield to a RaspberryPi via libnfc">
<meta name="twitter:description" content="I’m working on an NFC project and to test things out I got a PN532 NFC shield working with a RaspberryPi via libnfc. 
Adafruit has a good step-by-step tutorial, but it’s not up-to-date and it’s for th">
<meta name="twitter:image" content="http://blog.jongallant.com/images/blog/nfc-shield-pn532-raspberrypi-libnfc_D006/image.png">
    

    
        <link rel="alternate" href="http://feeds.feedburner.com/jongallant" title="Jon Gallant" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1148981-8', 'auto');
ga('send', 'pageview');

</script>
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">tech.leadership.music.coffee</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/">Leadership</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Career-Model/">Career Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Productivity/">Productivity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Review-Model/">Review Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Work-Life-Balance/">Work:Life Balance</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Musings/">Musings</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/">Tech</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/3D-Printing/">3D Printing</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Announcements/">Announcements</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Azure/">Azure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Bugs/">Bugs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Career/">Career</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Conferences/">Conferences</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/IoT/">IoT</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Jobs/">Jobs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Microsoft/">Microsoft</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Power-BI/">Power BI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tips/">Tips</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tutorials/">Tutorials</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/archives/">Archive</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/contact/">Contact</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/category/Tech/">Tech</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/category/Tech/Tutorials/">Tutorials</a>
    </h1>
</div>

                        
                        <div class="main-body-content">
                        <div class="banner-ad">
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- banner -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-7253926757222509"
     data-ad-slot="8838481977"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
                            <article id="post-raspberrypi-libnfc-pn532-nfc-shield" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        How to connect a PN532 NFC Shield to a RaspberryPi via libnfc
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                
<a href="/2014/11/raspberrypi-libnfc-pn532-nfc-shield/" class="article-date">
    <time datetime="2014-11-11T15:44:00.000Z" itemprop="datePublished">2014-11-11</time>
</a>

                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iot/">iot</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p><img src="/images/blog/nfc-shield-pn532-raspberrypi-libnfc_D006/image.png" alt="">I’m working on an NFC project and to test things out I got a <a href="http://www.adafruit.com/products/789" target="_blank" rel="external">PN532 NFC shield</a> working with a RaspberryPi via <a href="http://nfc-tools.org/" target="_blank" rel="external">libnfc</a>. </p>
<p>Adafruit has a good <a href="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/overview" target="_blank" rel="external">step-by-step tutorial</a>, but it’s not up-to-date and it’s for the <a href="http://www.adafruit.com/product/364" target="_blank" rel="external">PN532 breakout board</a> not the PN532 shield. They also have <a href="https://learn.adafruit.com/adafruit-pn532-rfid-nfc/overview" target="_blank" rel="external">this one for Arduino</a> – it’s not RaspberryPi, but still helpful for understanding the concepts.</p>
<p>Here’s how I got it going – hope this saves you some time.</p>
<p><strong>1. Get Occidentalis v0.2</strong></p>
<p><a href="https://learn.adafruit.com/adafruit-raspberry-pi-educational-linux-distro/occidentalis-v0-dot-2" title="https://learn.adafruit.com/adafruit-raspberry-pi-educational-linux-distro/occidentalis-v0-dot-2" target="_blank" rel="external">https://learn.adafruit.com/adafruit-raspberry-pi-educational-linux-distro/occidentalis-v0-dot-2</a></p>
<p><strong>2. Make Occidentalis SD card</strong></p>
<p><a href="https://learn.adafruit.com/adafruit-raspberry-pi-lesson-1-preparing-and-sd-card-for-your-raspberry-pi/making-an-sd-card-using-a-windows-vista-slash-7" title="https://learn.adafruit.com/adafruit-raspberry-pi-lesson-1-preparing-and-sd-card-for-your-raspberry-pi/making-an-sd-card-using-a-windows-vista-slash-7" target="_blank" rel="external">https://learn.adafruit.com/adafruit-raspberry-pi-lesson-1-preparing-and-sd-card-for-your-raspberry-pi/making-an-sd-card-using-a-windows-vista-slash-7</a></p>
<p><strong>3. Run first time config</strong></p>
<p><a href="https://learn.adafruit.com/adafruits-raspberry-pi-lesson-2-first-time-configuration" title="https://learn.adafruit.com/adafruits-raspberry-pi-lesson-2-first-time-configuration" target="_blank" rel="external">https://learn.adafruit.com/adafruits-raspberry-pi-lesson-2-first-time-configuration</a></p>
<p><strong>4. Free UART on the Pi</strong></p>
<p><a href="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/freeing-uart-on-the-pi" title="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/freeing-uart-on-the-pi" target="_blank" rel="external">https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/freeing-uart-on-the-pi</a></p>
<ul>
<li>On step one remove any key-value pairs that reference ttyAMAO (i.e. console=ttyAMAO,115200) and keep everything else. <a href="http://www.raspberry-projects.com/pi/pi-operating-systems/raspbian/io-pins-raspbian/uart-pins" title="http://www.raspberry-projects.com/pi/pi-operating-systems/raspbian/io-pins-raspbian/uart-pins" target="_blank" rel="external">http://www.raspberry-projects.com/pi/pi-operating-systems/raspbian/io-pins-raspbian/uart-pins</a></li>
</ul>
<p><strong>5. Get and Build libnfc</strong></p>
<p><a href="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/building-libnfc" title="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/building-libnfc" target="_blank" rel="external">https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/building-libnfc</a></p>
<ul>
<li>On step one change wget libnfc url to: <a href="https://libnfc.googlecode.com/archive/libnfc-1.7.0.tar.gz" title="https://libnfc.googlecode.com/archive/libnfc-1.7.0.tar.gz" target="_blank" rel="external">https://libnfc.googlecode.com/archive/libnfc-1.7.0.tar.gz</a></li>
<li>On step three you might get the following: “./configure command not found” if so then follow the instructions here: <a href="http://forums.adafruit.com/viewtopic.php?f=19&amp;t=53935#p292489" title="http://forums.adafruit.com/viewtopic.php?f=19&amp;t=53935#p292489" target="_blank" rel="external">http://forums.adafruit.com/viewtopic.php?f=19&amp;t=53935#p292489</a></li>
</ul>
<p><strong>6. Prepare the PN532</strong></p>
<p>When I was going through this I was going under the assumption that libnfc only worked in UART mode (because that is what I found on from many sources), but I later found that it does support I2C and SPI. To get PN532 in UART mode you need to solder SEL0 on the board (make sure you are soldering SEL closest to MOSI on the board. In v.1 of PN532 SEL0 and SEL1 labels were reversed.</p>
<p><img src="/images/blog/nfc-shield-pn532-raspberrypi-libnfc_D006/image_3.png" alt=""></p>
<p>I found that info here: <a href="http://www.mobilefish.com/developer/libnfc/libnfc_quickguide_adafruit.html" title="http://www.mobilefish.com/developer/libnfc/libnfc_quickguide_adafruit.html" target="_blank" rel="external">http://www.mobilefish.com/developer/libnfc/libnfc_quickguide_adafruit.html</a></p>
<p><strong>7. Wire up the PN532 to the breadboard and the RaspberryPi</strong></p>
<ul>
<li>Connect 5v power and GND from RaspberryPi to breadboard</li>
<li>Connect 5v power and GND from PN532 to breadboard</li>
</ul>
<p>The PN532 outputs 5V, but the RaspberryPi TXD and RXD pins are rated for 3.3V so we need to put a 220ohm resistor between them. <a href="http://jamesreubenknowles.com/level-shifting-stragety-experments-1741" title="http://jamesreubenknowles.com/level-shifting-stragety-experments-1741" target="_blank" rel="external">http://jamesreubenknowles.com/level-shifting-stragety-experments-1741</a></p>
<ul>
<li>Connect PN532 SCL to RaspberryPi TXD with a 220ohm resistor between them</li>
<li>Connect PN532 SDA to RaspberryPi RXD with a 220ohm resistor between them</li>
</ul>
<p><img src="/images/blog/nfc-shield-pn532-raspberrypi-libnfc_D006/image_4.png" alt=""></p>
<p><strong>8. Test it out</strong></p>
<p><a href="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/testing-it-out" title="https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/testing-it-out" target="_blank" rel="external">https://learn.adafruit.com/adafruit-nfc-rfid-on-raspberry-pi/testing-it-out</a></p>
<p>After running nfc-poll and swiping a card you should see your UID – which means it is working!</p>
<p><img src="/images/blog/nfc-shield-pn532-raspberrypi-libnfc_D006/image_5.png" alt=""></p>
<p>Let me know if you run into any issues.</p>
<p>Jon</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://blog.jongallant.com/2014/11/raspberrypi-libnfc-pn532-nfc-shield/" data-id="cj4io7ire00unpcj44vhq6tdj" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

                        </div>
                        <div style="width:64%;margin:auto;" data-type="ad" data-publisher="lqm.jongallant.site" data-format="728x90" data-zone="ros" data-tags="iot%2cangularjs%2cjavascript%2cnode%2cazureiot%2cazure%2cpowerbi%2cseattle%2cdeveloper%2cmicrosoft%2ctutorials"></div>
                    </section>
                    
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2017 Jon Gallant</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a>. Hosting provided by <a href="http://birch.com" target="_blank">Birch</a>. <p>Disclaimer: The opinions expressed herein are my own personal opinions and do not represent my employer’s view in any way.</p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'jongallant';
    
    
    var disqus_url = 'http://blog.jongallant.com/2014/11/raspberrypi-libnfc-pn532-nfc-shield/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>

    <script type='text/javascript'>
function _dmBootstrap(file) {
    var _dma = document.createElement('script');
    _dma.type = 'text/javascript';
    _dma.async = true;
    _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
}
function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js'); }
(function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000); })();
</script>
    
</body>
</html>
